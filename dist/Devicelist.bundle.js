(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{164:function(e,n,t){var i=t(165);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(15)(i,r);i.locals&&(e.exports=i.locals)},165:function(e,n,t){(e.exports=t(14)(!1)).push([e.i,".card-wrap {\n  width: 95%;\n  height: 15rem;\n  border-radius: 1rem;\n  border: 0.05rem solid;\n  margin: 1rem 0rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n.card-left,\n.card-right {\n  flex: 1;\n  display: flex;\n  border: 1px solid;\n  flex-direction: column;\n}\n.card-content-center {\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  display: flex;\n}\n.card-left-up {\n  flex: 1;\n}\n.card-left-down {\n  flex: 1;\n}\n.card-right-up {\n  flex: 1;\n}\n.card-right-down {\n  flex: 1;\n}\n",""])},171:function(e,n,t){"use strict";t.r(n);var i=t(58),r=t(22),o=t(0),a=t.n(o),c=t(23),s=t(77),l=(t(164),t(17));const d="card",u=`${d}-content-center`;var v=class extends a.a.PureComponent{constructor(e){super(e),this.handleAction=(()=>{Object(l.a)({targets:this.card.current,scale:2,opacity:{value:0,easing:"linear"},duration:800}).finished.then(()=>{this.props.handleOnClick&&this.props.handleOnClick(this.props.device)})}),this.card=a.a.createRef()}render(){const{name:e,deviceID:n,data:t}=this.props.device;return a.a.createElement("div",{ref:this.card,className:`${d}-wrap`,onClick:this.handleAction},a.a.createElement("div",{className:`${d}-left`},a.a.createElement("div",{className:`${d}-left-up ${u}`},e||n),a.a.createElement("div",{className:`${d}-left-down ${u}`},a.a.createElement("div",null,"湿度:",t["Temperature and Humidity Sensor"].Humidity),a.a.createElement("br",null),a.a.createElement("div",null,"温度:",t["Temperature and Humidity Sensor"].Temperature))),a.a.createElement("div",{className:`${d}-right`},a.a.createElement("div",{className:`${d}-right-up ${u}`},a.a.createElement("div",null,"震动:","on"===t["Shock Sensor"]["on/off"]?"danger"===t["Shock Sensor"].status?"危险":"正常":"关闭"),a.a.createElement("br",null),a.a.createElement("div",null,"红外:","on"===t["Infrared Sensor"]["on/off"]?"danger"===t["Infrared Sensor"].status?"危险":"正常":"关闭")),a.a.createElement("div",{className:`${d}-right-down ${u}`},a.a.createElement("div",null,"烟雾浓度:","on"===t["Smoke Sensor"]["on/off"]?t["Smoke Sensor"].concentration:"关闭"),a.a.createElement("br",null),a.a.createElement("div",null,"状态:",t["Smoke Sensor"].status))))}},f=t(96),m=function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(a,c)}s((i=i.apply(e,n||[])).next())})};var h=Object(c.a)(class extends a.a.Component{constructor(e){super(e),this.handleGoController=(e=>{this.props.history.push("/controller",Object.assign({},e))})}componentDidMount(){return m(this,void 0,void 0,function*(){yield this.props.saveDevicesList(),yield this.props.initDevice(),Object(f.b)()})}render(){let e=[];return e=0===this.props.devices.length?[]:this.props.devices.map(e=>a.a.createElement(v,{device:e,key:e.deviceID,handleOnClick:this.handleGoController})),a.a.createElement(a.a.Fragment,null,a.a.createElement(s.a,{title:"设备管理"}),e)}},"start"),p=t(62),b=t(70);var g=Object(r.b)(e=>({userID:e.user.id?e.user.id:"",devicesList:e.user.devices,devices:e.devices}),e=>({saveDevicesList:()=>e(Object(p.c)()),initDevice:()=>e(Object(b.e)()),changeDeviceSensor:(n,t,r)=>e(i.a.changeDeviceSensor(n,t,r))}))(h);n.default=g},58:function(e,n,t){"use strict";t.d(n,"b",function(){return o}),t.d(n,"a",function(){return a});var i=t(70),r=t(62);const o={addDevice:r.a,saveDevicesList:r.e,deleteDevice:r.b},a={getDevice:i.c,getDeviceInit:i.d,changeDeviceSensor:i.a,deleteDeviceById:i.b,saveDeviceInformation:i.f,setSensorNormal:i.g}},62:function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return a}),t.d(n,"e",function(){return c}),t.d(n,"d",function(){return s}),t.d(n,"c",function(){return l});var i=t(21),r=function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(a,c)}s((i=i.apply(e,n||[])).next())})};const o=e=>({type:"ADD_DEVICE",deviceID:e}),a=e=>({type:"DELETE_DEVICE",deviceID:e}),c=e=>({type:"SAVE_DEVICESLIST",devicesList:e}),s=(e,n)=>t=>r(void 0,void 0,void 0,function*(){let r=yield i.b.login(e,n);return"string"==typeof r&&(t((e=>({type:"SAVE_USERID",userID:e}))("mike")),t((e=>({type:"SAVE_TOKEN",token:e}))(r)),!0)}),l=()=>e=>r(void 0,void 0,void 0,function*(){let n=yield i.b.getDevices();return"boolean"!=typeof n?(e(c(n)),n):[]})},70:function(e,n,t){"use strict";t.d(n,"c",function(){return a}),t.d(n,"a",function(){return c}),t.d(n,"d",function(){return s}),t.d(n,"e",function(){return l}),t.d(n,"b",function(){return d}),t.d(n,"f",function(){return u}),t.d(n,"g",function(){return v});var i=t(21),r=t(58),o=function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(a,c)}s((i=i.apply(e,n||[])).next())})};const a=e=>({type:"GET_DEVICE_INFORMATION",id:e}),c=(e,n,t)=>({type:"CHANGE_DEVICE_SENSOR",id:e,sensor:n,param:t}),s=e=>({type:"INIT_DEVICESLIST",devicesList:e}),l=()=>e=>o(void 0,void 0,void 0,function*(){let n=yield i.a.getDeviceFromList();e(s(n))}),d=e=>n=>o(void 0,void 0,void 0,function*(){return!0===(yield i.b.deleteDevice(e))&&(n(r.b.deleteDevice(e)),n((e=>({type:"DELET_DEVICE_FROM_CARD",id:e}))(e)),!0)}),u=e=>n=>o(void 0,void 0,void 0,function*(){return!0===(yield i.a.saveDevice(e))&&(n(((e,n)=>({type:"SAVE_DEVICE_INFORMATION",devicesID:e,device:n}))(e.deviceID,e)),!0)}),v=(e,n)=>t=>o(void 0,void 0,void 0,function*(){return!0===(yield i.a.setSensorNormal(e,n))&&(t(((e,n)=>({type:"SET_NORMAL",id:e,sensor:n}))(e,n)),!0)})},77:function(e,n,t){"use strict";var i=t(0),r=t.n(i);t(78);const o=r.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1","p-id":"1731",height:"100%"},r.a.createElement("path",{d:"M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z",fill:"#181818","p-id":"1732"}));n.a=function(e){const{icon:n=o,leftContent:t,rightContent:i,onLeftClick:a,onrightClick:c,title:s="title",position:l="absolute"}=e;return r.a.createElement(r.a.Fragment,null,"absolute"===l?r.a.createElement("div",{className:"navbar-bottom"}):null,r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-left"},a?r.a.createElement("div",{onClick:a,style:{height:"100%"}},n):null,t),r.a.createElement("div",{className:"navbar-title"},s),r.a.createElement("div",{className:"navbar-right"},c?r.a.createElement("button",{className:"navbar-button",onClick:c},i):null)))}},78:function(e,n,t){var i=t(79);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(15)(i,r);i.locals&&(e.exports=i.locals)},79:function(e,n,t){(e.exports=t(14)(!1)).push([e.i,".navbar {\n  display: flex;\n  align-items: center;\n  background: #bea0da;\n  height: 4rem;\n  width: 100%;\n}\n.navbar-bottom {\n  flex-shrink: 0;\n  height: 4rem;\n  width: 100%;\n  display: inline-block;\n}\n.navbar-bottom + .navbar {\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n.navbar-left,\n.navbar-title,\n.navbar-right {\n  flex: 1;\n  flex-direction: row;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n.navbar-left {\n  justify-content: flex-start;\n}\n.navbar-title {\n  font-size: 1.5rem;\n  justify-content: center;\n}\n.navbar-right {\n  justify-content: flex-end;\n}\n.navbar-button {\n  height: 60%;\n  width: 5rem;\n  margin-right: 1rem;\n  border: 0;\n  padding: 0;\n  outline: 0;\n}\n",""])},96:function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return f});var i=t(95),r=t.n(i),o=t(12),a=t(58),c=function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(a,c)}s((i=i.apply(e,n||[])).next())})};let s=null;function l(e,n){let t;console.log("onmqttConnect"),e.subscribe("World"),function(e,n){n.forEach(n=>{e.subscribe(`devices/${n}/#`)})}(e,n),(t=new r.a.Message("Hello")).destinationName="World",e.send(t)}function d(){console.log("onFailure")}function u(e){0!==e.errorCode&&console.log("onConnectionLost:"+e.errorMessage),null!==s&&s.connect()}function v(e){console.log("onMessageArrived:"+e.payloadString);const n=e.destinationName.split("/");let t,i;switch(n.length){case 3:t=n[1],i=n[2].replace(/_/g," "),o.b.dispatch(a.a.changeDeviceSensor(t,i,JSON.parse(e.payloadString)))}}const f=()=>{if(null===s){((e,n)=>c(void 0,void 0,void 0,function*(){s=new r.a.Client("fogmonth.xyz",443,"/mqttwss",n);const t={timeout:10,onSuccess:l.bind(null,s,e),onFailure:d,reconnect:!0,useSSL:!0};return s.isConnected()?s:(s.onConnectionLost=u,s.onMessageArrived=v,s.connect(t),s)}))(o.b.getState().user.devices,o.b.getState().user.id)}else console.log("Mqtt is exists")}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DYXJkL2NhcmQubGVzcz9jOWFhIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NhcmQvY2FyZC5sZXNzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0NhcmQvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9EZXZpY2VsaXN0L2RldmljZWxpc3QudHN4Iiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9EZXZpY2VsaXN0L2Nvbm5lY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL0RldmljZWxpc3QvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9yZWR1eC9hY3Rpb24vaW5kZXgudHN4Iiwid2VicGFjazovLy8uL3NyYy9yZWR1eC9hY3Rpb24vdXNlci50c3g/ZTIxNyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVkdXgvYWN0aW9uL2RldmljZS50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvTmF2YmFyL2luZGV4LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9OYXZiYXIvaW5kZXgubGVzcz82YjQ2Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL05hdmJhci9pbmRleC5sZXNzIiwid2VicGFjazovLy8uL3NyYy9hcGkvbXF0dC9pbmRleC50cyJdLCJuYW1lcyI6WyJjb250ZW50IiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZSIsImkiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyIsImV4cG9ydHMiLCJwdXNoIiwicHJlZml4IiwiY29udGVudENlbnRlciIsImNvbXBvbmVudHNfQ2FyZCIsInJlYWN0X2RlZmF1bHQiLCJhIiwiUHVyZUNvbXBvbmVudCIsIltvYmplY3QgT2JqZWN0XSIsInByb3BzIiwic3VwZXIiLCJ0aGlzIiwiaGFuZGxlQWN0aW9uIiwiT2JqZWN0IiwiYW5pbWVfZXMiLCJ0YXJnZXRzIiwiY2FyZCIsImN1cnJlbnQiLCJzY2FsZSIsIm9wYWNpdHkiLCJ2YWx1ZSIsImVhc2luZyIsImR1cmF0aW9uIiwiZmluaXNoZWQiLCJ0aGVuIiwiaGFuZGxlT25DbGljayIsImRldmljZSIsImNyZWF0ZVJlZiIsIm5hbWUiLCJkZXZpY2VJRCIsImRhdGEiLCJjcmVhdGVFbGVtZW50IiwicmVmIiwiY2xhc3NOYW1lIiwib25DbGljayIsIkh1bWlkaXR5IiwiVGVtcGVyYXR1cmUiLCJzdGF0dXMiLCJjb25jZW50cmF0aW9uIiwiZGV2aWNlbGlzdCIsInJvb3QiLCJDb21wb25lbnQiLCJoYW5kbGVHb0NvbnRyb2xsZXIiLCJoaXN0b3J5IiwiYXNzaWduIiwic2F2ZURldmljZXNMaXN0IiwiaW5pdERldmljZSIsIm1xdHQiLCJjYXJkTGlzdCIsImRldmljZXMiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwia2V5IiwiRnJhZ21lbnQiLCJOYXZiYXIiLCJ0aXRsZSIsImNvbm5lY3QiLCJlcyIsInN0YXRlIiwidXNlcklEIiwidXNlciIsImlkIiwiZGV2aWNlc0xpc3QiLCJkaXNwYXRjaCIsImNoYW5nZURldmljZVNlbnNvciIsImRldmljZXNJRCIsInNlbnNvciIsInBhcmFtIiwiYWN0aW9uIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsImQiLCJ1c2VyQWN0aW9uIiwiZGV2aWNlQWN0aW9uIiwiX2RldmljZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX3VzZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsImFkZERldmljZSIsImRlbGV0ZURldmljZSIsImdldERldmljZSIsImdldERldmljZUluaXQiLCJkZWxldGVEZXZpY2VCeUlkIiwic2F2ZURldmljZUluZm9ybWF0aW9uIiwic2V0U2Vuc29yTm9ybWFsIiwidHlwZSIsImxvZ2luIiwicGFzc1dvcmQiLCJfX2F3YWl0ZXIiLCJ0b2tlbiIsIl9hcGlfaHR0cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwic2F2ZVVzZXJJRCIsInNhdmVUb2tlbiIsImdldFVzZXJEZXZpY2VMaXN0IiwiZ2V0RGV2aWNlcyIsImluaXREZXZpY2VsaXN0IiwiZ2V0RGV2aWNlRnJvbUxpc3QiLCJfX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJkZWxldGVEZXZpY2VGcm9tQ2FyZCIsInNhdmVEZXZpY2UiLCJzZXROb3JtYWwiLCJyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwicmVhY3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0IiwibiIsImxlZnRJY29uIiwidmlld0JveCIsInZlcnNpb24iLCJwLWlkIiwiaGVpZ2h0IiwiZmlsbCIsImljb24iLCJsZWZ0Q29udGVudCIsInJpZ2h0Q29udGVudCIsIm9uTGVmdENsaWNrIiwib25yaWdodENsaWNrIiwicG9zaXRpb24iLCJzdHlsZSIsImNsaWVudCIsIm9uQ29ubmVjdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwic3Vic2NyaWJlIiwiZm9yRWFjaCIsInN1YiIsInBhaG9fbXF0dF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQiLCJNZXNzYWdlIiwiZGVzdGluYXRpb25OYW1lIiwic2VuZCIsIm9uRmFpbHVyZSIsIm9uQ29ubmVjdGlvbkxvc3QiLCJyZXNwb25zZU9iamVjdCIsImVycm9yQ29kZSIsImVycm9yTWVzc2FnZSIsIm9uTWVzc2FnZUFycml2ZWQiLCJwYXlsb2FkU3RyaW5nIiwidG9waWMiLCJzcGxpdCIsInJlcGxhY2UiLCJfQVBQX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJfcmVkdXhfYWN0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJKU09OIiwicGFyc2UiLCJzdGFydE1RVFQiLCJDbGllbnQiLCJvcHRpb24iLCJ0aW1lb3V0Iiwib25TdWNjZXNzIiwiYmluZCIsInJlY29ubmVjdCIsInVzZVNTTCIsImlzQ29ubmVjdGVkIiwiY3JlYXRl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QUFpQkMsR0FDUyxJQUE3QkEsRUFBZUMsV0FDakJaLFFBQVFDLElBQUksb0JBQXNCVSxFQUFlRSxjQUV2QyxPQUFUaEIsR0FDREEsRUFBTzFELFVBS1gsU0FBUzJFLEVBQWlCZixHQUN4QkMsUUFBUUMsSUFBSSxvQkFBc0JGLEVBQVFnQixlQUMxQyxNQUFNQyxFQUFRakIsRUFBUVEsZ0JBQWdCVSxNQUFNLEtBQzVDLElBQUkxRyxFQUNBc0MsRUFDSixPQUFRbUUsRUFBTXBGLFFBQ1osS0FBSyxFQUNIckIsRUFBV3lHLEVBQU0sR0FDakJuRSxFQUFTbUUsRUFBTSxHQUFHRSxRQUFRLEtBQU0sS0FDaENDLEVBQUEsRUFBTXpFLFNBQVMwRSxFQUFBLEVBQWF6RSxtQkFBbUJwQyxFQUFVc0MsRUFBUXdFLEtBQUtDLE1BQU12QixFQUFRZ0Isa0JBTzFGLE1BeUJhUSxFQUFZLEtBQ3ZCLEdBQWUsT0FBWDFCLEVBQWlCLENBMUJFLEVBQU9wRCxFQUF1QkgsSUFBa0IwQixPQUFBeEYsT0FBQSxxQkFDdkVxSCxFQUFTLElBQUlRLEVBQUFySCxFQUFLd0ksT0FBTyxlQUFnQixJQUFLLFdBQVlsRixHQUUxRCxNQUFNbUYsRUFBUyxDQUNiQyxRQUFTLEdBQ1RDLFVBQVc3QixFQUFVOEIsS0FBSyxLQUFNL0IsRUFBUXBELEdBQ3hDZ0UsVUFBV0EsRUFDWG9CLFdBQVcsRUFDWEMsUUFBUSxHQUdWLE9BQUlqQyxFQUFPa0MsY0FDRmxDLEdBSVRBLEVBQU9hLGlCQUFtQkEsRUFDMUJiLEVBQU9pQixpQkFBbUJBLEVBRzFCakIsRUFBTzFELFFBQVFzRixHQUVSNUIsS0FPTG1DLENBRm9CYixFQUFBLEVBQU1jLFdBQVcxRixLQUFLWixRQUM3QndGLEVBQUEsRUFBTWMsV0FBVzFGLEtBQUtDLFNBR25Dd0QsUUFBUUMsSUFBSSIsImZpbGUiOiJEZXZpY2VsaXN0LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbGVzcy1sb2FkZXIvZGlzdC9janMuanMhLi9jYXJkLmxlc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9sZXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2NhcmQubGVzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9sZXNzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL2NhcmQubGVzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmNhcmQtd3JhcCB7XFxuICB3aWR0aDogOTUlO1xcbiAgaGVpZ2h0OiAxNXJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XFxuICBib3JkZXI6IDAuMDVyZW0gc29saWQ7XFxuICBtYXJnaW46IDFyZW0gMHJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxufVxcbi5jYXJkLWxlZnQsXFxuLmNhcmQtcmlnaHQge1xcbiAgZmxleDogMTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3JkZXI6IDFweCBzb2xpZDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxufVxcbi5jYXJkLWNvbnRlbnQtY2VudGVyIHtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBkaXNwbGF5OiBmbGV4O1xcbn1cXG4uY2FyZC1sZWZ0LXVwIHtcXG4gIGZsZXg6IDE7XFxufVxcbi5jYXJkLWxlZnQtZG93biB7XFxuICBmbGV4OiAxO1xcbn1cXG4uY2FyZC1yaWdodC11cCB7XFxuICBmbGV4OiAxO1xcbn1cXG4uY2FyZC1yaWdodC1kb3duIHtcXG4gIGZsZXg6IDE7XFxufVxcblwiLCBcIlwiXSk7XG5cbiIsImltcG9ydCBSZWFjdCwgeyBQcm9wcywgUmVmT2JqZWN0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBcIi4vY2FyZC5sZXNzXCJcclxuaW1wb3J0IGFuaW1lIGZyb20gXCJhbmltZWpzXCI7XHJcbmltcG9ydCB7IERldmljZXNJbnRlcmZhY2UsIFNlbnNvckludGVyZmFjZSB9IGZyb20gXCIuLi8uLi9yZWR1eC9pbnRlcmZhY2UvZGV2aWNlcy5pbnRlcmZhY2VcIjtcclxuXHJcbmludGVyZmFjZSBQIGV4dGVuZHMgUHJvcHM8e30+IHtcclxuICBkZXZpY2U6IERldmljZXNJbnRlcmZhY2U7XHJcbiAgaGFuZGxlT25DbGljaz86IChkZXZpY2U6IERldmljZXNJbnRlcmZhY2UpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNvbnN0IHByZWZpeCA9ICdjYXJkJztcclxuY29uc3QgY29udGVudENlbnRlciA9IGAke3ByZWZpeH0tY29udGVudC1jZW50ZXJgO1xyXG5cclxudHlwZSBhbGxTZW5zb3IgPSBrZXlvZiBTZW5zb3JJbnRlcmZhY2U7XHJcblxyXG5jbGFzcyBDYXJkIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQPiB7XHJcbiAgcHJvdGVjdGVkIGNhcmQ6IFJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD47XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm9wczogUCkge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5jYXJkID0gUmVhY3QuY3JlYXRlUmVmKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlQWN0aW9uID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgYW5pbWUoe1xyXG4gICAgICB0YXJnZXRzOiB0aGlzLmNhcmQuY3VycmVudCxcclxuICAgICAgc2NhbGU6IDIsXHJcbiAgICAgIG9wYWNpdHk6IHtcclxuICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICBlYXNpbmc6ICdsaW5lYXInXHJcbiAgICAgIH0sXHJcbiAgICAgIGR1cmF0aW9uOiA4MDAsXHJcbiAgICB9KS5maW5pc2hlZC50aGVuKCgpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKHRoaXMucHJvcHMuaGFuZGxlT25DbGljaykge1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGFuZGxlT25DbGljayh0aGlzLnByb3BzLmRldmljZSk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVuZGVyKCk6IEpTWC5FbGVtZW50IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgZGV2aWNlSUQsXHJcbiAgICAgIGRhdGEsXHJcbiAgICB9ID0gdGhpcy5wcm9wcy5kZXZpY2U7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiByZWY9e3RoaXMuY2FyZH0gY2xhc3NOYW1lPXtgJHtwcmVmaXh9LXdyYXBgfSBvbkNsaWNrPXt0aGlzLmhhbmRsZUFjdGlvbn0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeH0tbGVmdGB9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeH0tbGVmdC11cCAke2NvbnRlbnRDZW50ZXJ9YH0+e25hbWUgPyBuYW1lIDogZGV2aWNlSUR9PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1sZWZ0LWRvd24gJHtjb250ZW50Q2VudGVyfWB9PlxyXG4gICAgICAgICAgICA8ZGl2Pua5v+W6pjp7ZGF0YVtcIlRlbXBlcmF0dXJlIGFuZCBIdW1pZGl0eSBTZW5zb3JcIl0uSHVtaWRpdHl9PC9kaXY+XHJcbiAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICA8ZGl2Pua4qeW6pjp7ZGF0YVtcIlRlbXBlcmF0dXJlIGFuZCBIdW1pZGl0eSBTZW5zb3JcIl0uVGVtcGVyYXR1cmV9PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1yaWdodGB9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeH0tcmlnaHQtdXAgJHtjb250ZW50Q2VudGVyfWB9PlxyXG4gICAgICAgICAgICA8ZGl2Pumch+WKqDp7ZGF0YVtcIlNob2NrIFNlbnNvclwiXVtcIm9uL29mZlwiXSA9PT0gXCJvblwiID8gZGF0YVtcIlNob2NrIFNlbnNvclwiXS5zdGF0dXMgPT09ICdkYW5nZXInID8gJ+WNsemZqScgOiAn5q2j5bi4JyA6ICflhbPpl60nfTwvZGl2PlxyXG4gICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgPGRpdj7nuqLlpJY6e2RhdGFbXCJJbmZyYXJlZCBTZW5zb3JcIl1bXCJvbi9vZmZcIl0gPT09IFwib25cIiA/IGRhdGFbJ0luZnJhcmVkIFNlbnNvciddLnN0YXR1cyA9PT0gJ2RhbmdlcicgPyAn5Y2x6ZmpJyA6ICfmraPluLgnIDogXCLlhbPpl61cIn08L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeH0tcmlnaHQtZG93biAke2NvbnRlbnRDZW50ZXJ9YH0+XHJcbiAgICAgICAgICAgIDxkaXY+54Of6Zu+5rWT5bqmOntkYXRhW1wiU21va2UgU2Vuc29yXCJdW1wib24vb2ZmXCJdID09PSAnb24nID8gZGF0YVtcIlNtb2tlIFNlbnNvclwiXS5jb25jZW50cmF0aW9uIDogXCLlhbPpl61cIn08L2Rpdj5cclxuICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgIDxkaXY+54q25oCBOntkYXRhW1wiU21va2UgU2Vuc29yXCJdLnN0YXR1c308L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiaW1wb3J0IFJlYWN0LCB7IFByb3BzIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB3aXRoUm9vdCBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9yb290XCI7XHJcbmltcG9ydCBOYXZiYXIgZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvTmF2YmFyXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi8uLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IHsgRGV2aWNlc0ludGVyZmFjZSwgc2Vuc29yVHlwZSB9IGZyb20gXCIuLi8uLi9yZWR1eC9pbnRlcmZhY2UvZGV2aWNlcy5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgSGlzdG9yeSB9IGZyb20gXCJoaXN0b3J5XCI7XHJcbmltcG9ydCB7IHN0YXJ0TVFUVCwgZGlzY29ubmVjdE1RVFQgfSBmcm9tIFwiLi4vLi4vYXBpL21xdHRcIjtcclxuXHJcbmludGVyZmFjZSBQIGV4dGVuZHMgUHJvcHM8e30+IHtcclxuICBoaXN0b3J5OiBIaXN0b3J5O1xyXG4gIHVzZXJJRDogc3RyaW5nO1xyXG4gIGRldmljZXNMaXN0OiBzdHJpbmdbXTtcclxuICBkZXZpY2VzOiBEZXZpY2VzSW50ZXJmYWNlW107XHJcbiAgc2F2ZURldmljZXNMaXN0OiAoKSA9PiBQcm9taXNlPHN0cmluZ1tdPjtcclxuICBpbml0RGV2aWNlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGNoYW5nZURldmljZVNlbnNvcjogKGRldmljZXNJRDogc3RyaW5nLCBzZW5zb3I6IHNlbnNvclR5cGUsIHBhcmFtOiB7fSkgPT4gdm9pZDtcclxufVxyXG5cclxuY2xhc3MgRGV2aWNlTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQPntcclxuICBwdWJsaWMgY29uc3RydWN0b3IocHJvcHM6IFApIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIGF3YWl0IHRoaXMucHJvcHMuc2F2ZURldmljZXNMaXN0KCk7XHJcbiAgICBhd2FpdCB0aGlzLnByb3BzLmluaXREZXZpY2UoKTtcclxuICAgIHN0YXJ0TVFUVCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gcHVibGljIGFzeW5jIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gIC8vICAgZGlzY29ubmVjdE1RVFQoKTtcclxuICAvLyB9XHJcblxyXG4gIHB1YmxpYyBoYW5kbGVHb0NvbnRyb2xsZXIgPSAoZGV2aWNlOiBEZXZpY2VzSW50ZXJmYWNlKSA9PiB7XHJcbiAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnL2NvbnRyb2xsZXInLCB7XHJcbiAgICAgIC4uLmRldmljZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW5kZXIoKTogSlNYLkVsZW1lbnQge1xyXG5cclxuICAgIGxldCBjYXJkTGlzdDogSlNYLkVsZW1lbnRbXSA9IFtdO1xyXG4gICAgaWYgKHRoaXMucHJvcHMuZGV2aWNlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY2FyZExpc3QgPSBbXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhcmRMaXN0ID0gdGhpcy5wcm9wcy5kZXZpY2VzLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIHJldHVybiA8Q2FyZCBkZXZpY2U9e2l0ZW19IGtleT17aXRlbS5kZXZpY2VJRH0gaGFuZGxlT25DbGljaz17dGhpcy5oYW5kbGVHb0NvbnRyb2xsZXJ9IC8+XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIDxOYXZiYXIgdGl0bGU9XCLorr7lpIfnrqHnkIZcIiAvPlxyXG4gICAgICAgIHtjYXJkTGlzdH1cclxuICAgICAgPC8+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoUm9vdChEZXZpY2VMaXN0LCAnc3RhcnQnKTsiLCJpbXBvcnQgeyBBcHBTdGF0ZUludGVyZmFjZSB9IGZyb20gXCIuLi8uLi9yZWR1eC9yZWR1Y2Vyc1wiO1xyXG5pbXBvcnQgeyBkZXZpY2VBY3Rpb24gfSBmcm9tIFwiLi4vLi4vcmVkdXgvYWN0aW9uXCI7XHJcbmltcG9ydCB7IERldmljZXNJbnRlcmZhY2UsIHNlbnNvclR5cGUgfSBmcm9tIFwiLi4vLi4vcmVkdXgvaW50ZXJmYWNlL2RldmljZXMuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCBEZXZpY2VzTGlzdCBmcm9tICcuL2RldmljZWxpc3QnXHJcbmltcG9ydCB7IGdldFVzZXJEZXZpY2VMaXN0IH0gZnJvbSBcIi4uLy4uL3JlZHV4L2FjdGlvbi91c2VyXCI7XHJcbmltcG9ydCB7IGluaXREZXZpY2VsaXN0IH0gZnJvbSBcIi4uLy4uL3JlZHV4L2FjdGlvbi9kZXZpY2VcIjtcclxuXHJcblxyXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSAoc3RhdGU6IEFwcFN0YXRlSW50ZXJmYWNlKSA9PiB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHVzZXJJRDogc3RhdGUudXNlci5pZCA/IHN0YXRlLnVzZXIuaWQgOiAnJyxcclxuICAgIGRldmljZXNMaXN0OiBzdGF0ZS51c2VyLmRldmljZXMsXHJcbiAgICBkZXZpY2VzOiBzdGF0ZS5kZXZpY2VzLFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IChkaXNwYXRjaDogRnVuY3Rpb24pID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgc2F2ZURldmljZXNMaXN0OiAoKTogUHJvbWlzZTxzdHJpbmdbXT4gPT4gZGlzcGF0Y2goZ2V0VXNlckRldmljZUxpc3QoKSksXHJcbiAgICBpbml0RGV2aWNlOiAoKTogUHJvbWlzZTx2b2lkPiA9PiBkaXNwYXRjaChpbml0RGV2aWNlbGlzdCgpKSxcclxuICAgIGNoYW5nZURldmljZVNlbnNvcjogKGRldmljZXNJRDogc3RyaW5nLCBzZW5zb3I6IHNlbnNvclR5cGUsIHBhcmFtOiB7fSk6IHZvaWQgPT4gZGlzcGF0Y2goZGV2aWNlQWN0aW9uLmNoYW5nZURldmljZVNlbnNvcihkZXZpY2VzSUQsIHNlbnNvciwgcGFyYW0pKSxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXHJcbiAgbWFwU3RhdGVUb1Byb3BzLFxyXG4gIG1hcERpc3BhdGNoVG9Qcm9wcyxcclxuKShEZXZpY2VzTGlzdCkiLCJpbXBvcnQgZGV2aWNlTGlzdCBmcm9tICcuL2Nvbm5lY3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGV2aWNlTGlzdDsiLCJpbXBvcnQgeyBzZXROb3JtYWwsIHNhdmVEZXZpY2UsIGdldERldmljZSwgZ2V0RGV2aWNlSW5pdCwgY2hhbmdlRGV2aWNlU2Vuc29yLCBkZWxldGVEZXZpY2VGcm9tQ2FyZCwgZGVsZXRlRGV2aWNlIGFzIGRlbGV0ZURldmljZUJ5SWQsIHNhdmVEZXZpY2VJbmZvcm1hdGlvbiwgc2V0U2Vuc29yTm9ybWFsIH0gZnJvbSAnLi9kZXZpY2UnO1xyXG5pbXBvcnQgeyBhZGREZXZpY2UsIHNhdmVEZXZpY2VzTGlzdCwgZGVsZXRlRGV2aWNlLCBzYXZlVG9rZW4sIHNhdmVVc2VySUQgfSBmcm9tICcuL3VzZXInO1xyXG5cclxudHlwZSBSZXR1cm5UeXBlPFQ+ID0gVCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgUiA/IFIgOiBhbnk7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlckFjdGlvbiA9IHsgYWRkRGV2aWNlLCBzYXZlRGV2aWNlc0xpc3QsIGRlbGV0ZURldmljZSB9O1xyXG5leHBvcnQgdHlwZSB1c2VyQWN0aW9uVHlwZSA9IFJldHVyblR5cGU8dHlwZW9mIHVzZXJBY3Rpb24uYWRkRGV2aWNlPlxyXG58IFJldHVyblR5cGU8dHlwZW9mIHVzZXJBY3Rpb24uc2F2ZURldmljZXNMaXN0PlxyXG58IFJldHVyblR5cGU8dHlwZW9mIHVzZXJBY3Rpb24uZGVsZXRlRGV2aWNlPlxyXG58IFJldHVyblR5cGU8dHlwZW9mIHNhdmVUb2tlbj5cclxufCBSZXR1cm5UeXBlPHR5cGVvZiBzYXZlVXNlcklEPlxyXG5cclxuZXhwb3J0IGNvbnN0IGRldmljZUFjdGlvbiA9IHsgZ2V0RGV2aWNlLCBnZXREZXZpY2VJbml0LCBjaGFuZ2VEZXZpY2VTZW5zb3IsIGRlbGV0ZURldmljZUJ5SWQsIHNhdmVEZXZpY2VJbmZvcm1hdGlvbiwgc2V0U2Vuc29yTm9ybWFsIH07XHJcbmV4cG9ydCB0eXBlIGRldmljZUFjdGlvblR5cGUgPSBSZXR1cm5UeXBlPHR5cGVvZiBzZXROb3JtYWw+XHJcbnwgUmV0dXJuVHlwZTx0eXBlb2Ygc2F2ZURldmljZT5cclxufCBSZXR1cm5UeXBlPHR5cGVvZiBnZXREZXZpY2U+XHJcbnwgUmV0dXJuVHlwZTx0eXBlb2YgZ2V0RGV2aWNlSW5pdD5cclxufCBSZXR1cm5UeXBlPHR5cGVvZiBjaGFuZ2VEZXZpY2VTZW5zb3I+XHJcbnwgUmV0dXJuVHlwZTx0eXBlb2YgZGVsZXRlRGV2aWNlRnJvbUNhcmQ+IiwiaW1wb3J0IHsgVGh1bmtBY3Rpb24gfSBmcm9tIFwicmVkdXgtdGh1bmtcIjtcclxuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcInJlZHV4XCI7XHJcbmltcG9ydCB7IGh0dHBVc2VyIH0gZnJvbSBcIi4uLy4uL2FwaS9odHRwXCI7XHJcbmltcG9ydCB7IEFwcFN0YXRlSW50ZXJmYWNlIH0gZnJvbSBcIi4uL3JlZHVjZXJzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkRGV2aWNlID0gKGRldmljZUlEOiBzdHJpbmcpID0+ICh7XHJcbiAgdHlwZTogXCJBRERfREVWSUNFXCIsXHJcbiAgZGV2aWNlSUQ6IGRldmljZUlELFxyXG59IGFzIGNvbnN0KVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZURldmljZSA9IChkZXZpY2VJRDogc3RyaW5nKSA9PiAoe1xyXG4gIHR5cGU6IFwiREVMRVRFX0RFVklDRVwiLFxyXG4gIGRldmljZUlEOiBkZXZpY2VJRCxcclxufSBhcyBjb25zdClcclxuXHJcbmV4cG9ydCBjb25zdCBzYXZlVXNlcklEID0gKHVzZXJJRDogc3RyaW5nKSA9PiAoe1xyXG4gIHR5cGU6IFwiU0FWRV9VU0VSSURcIixcclxuICB1c2VySUQsXHJcbn0gYXMgY29uc3QpXHJcblxyXG5leHBvcnQgY29uc3Qgc2F2ZVRva2VuID0gKHRva2VuOiBzdHJpbmcpID0+ICh7XHJcbiAgdHlwZTogXCJTQVZFX1RPS0VOXCIsXHJcbiAgdG9rZW4sXHJcbn0gYXMgY29uc3QpXHJcblxyXG5leHBvcnQgY29uc3Qgc2F2ZURldmljZXNMaXN0ID0gKGRldmljZXNMaXN0OiBzdHJpbmdbXSkgPT4gKHtcclxuICB0eXBlOiBcIlNBVkVfREVWSUNFU0xJU1RcIixcclxuICBkZXZpY2VzTGlzdCxcclxufSBhcyBjb25zdClcclxuXHJcbmV4cG9ydCBjb25zdCBsb2dpbiA9ICh1c2VySUQ6IHN0cmluZywgcGFzc1dvcmQ6IHN0cmluZyk6IFRodW5rQWN0aW9uPFByb21pc2U8Ym9vbGVhbj4sIEFwcFN0YXRlSW50ZXJmYWNlLCBudWxsLCBBY3Rpb248c3RyaW5nPj4gPT4ge1xyXG4gIHJldHVybiBhc3luYyAoZGlzcGF0Y2gpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcclxuICAgIGxldCB0b2tlbiA9IGF3YWl0IGh0dHBVc2VyLmxvZ2luKHVzZXJJRCwgcGFzc1dvcmQpXHJcbiAgICBpZiAodHlwZW9mIHRva2VuID09PSAnc3RyaW5nJykge1xyXG4gICAgICBkaXNwYXRjaChzYXZlVXNlcklEKFwibWlrZVwiKSk7XHJcbiAgICAgIGRpc3BhdGNoKHNhdmVUb2tlbih0b2tlbikpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRVc2VyRGV2aWNlTGlzdCA9ICgpOiBUaHVua0FjdGlvbjxQcm9taXNlPHN0cmluZ1tdPiwgQXBwU3RhdGVJbnRlcmZhY2UsIG51bGwsIEFjdGlvbjxzdHJpbmc+PiA9PiB7XHJcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCk6IFByb21pc2U8c3RyaW5nW10+ID0+IHtcclxuICAgIGxldCBkZXZpY2VzTGlzdCA9IGF3YWl0IGh0dHBVc2VyLmdldERldmljZXMoKTtcclxuICAgIGlmICh0eXBlb2YgZGV2aWNlc0xpc3QgIT09ICdib29sZWFuJykge1xyXG4gICAgICBkaXNwYXRjaChzYXZlRGV2aWNlc0xpc3QoZGV2aWNlc0xpc3QpKTtcclxuICAgICAgcmV0dXJuIGRldmljZXNMaXN0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG4vLyBmdW5jdGlvbiBleGFtcGxlQVBJKCkge1xyXG4vLyAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoJ0FzeW5jIENoYXQgQm90JylcclxuLy8gfVxyXG5cclxuLy8gY29uc3QgdGh1bmtTZW5kTWVzc2FnZSA9IChcclxuLy8gICBtZXNzYWdlOiBzdHJpbmdcclxuLy8gKTogVGh1bmtBY3Rpb248dm9pZCwgQXBwU3RhdGVJbnRlcmZhY2UsIG51bGwsIEFjdGlvbjxzdHJpbmc+PiA9PiBhc3luYyBkaXNwYXRjaCA9PiB7XHJcbi8vICAgY29uc3QgYXN5bmNSZXNwID0gYXdhaXQgZXhhbXBsZUFQSSgpXHJcbi8vICAgZGlzcGF0Y2goXHJcbi8vICAgICBzZW5kTWVzc2FnZSh7XHJcbi8vICAgICAgIG1lc3NhZ2UsXHJcbi8vICAgICAgIHVzZXI6IGFzeW5jUmVzcCxcclxuLy8gICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxyXG4vLyAgICAgfSlcclxuLy8gICApXHJcbi8vIH0iLCJpbXBvcnQgeyBEZXZpY2VzSW50ZXJmYWNlLCBzZW5zb3JUeXBlIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9kZXZpY2VzLmludGVyZmFjZVwiO1xyXG5pbXBvcnQgeyBUaHVua0FjdGlvbiB9IGZyb20gXCJyZWR1eC10aHVua1wiO1xyXG5pbXBvcnQgeyBBcHBTdGF0ZUludGVyZmFjZSB9IGZyb20gXCIuLi9yZWR1Y2Vyc1wiO1xyXG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwicmVkdXhcIjtcclxuaW1wb3J0IHsgaHR0cERldmljZSwgaHR0cFVzZXIgfSBmcm9tIFwiLi4vLi4vYXBpL2h0dHBcIjtcclxuaW1wb3J0IHsgdXNlckFjdGlvbiwgZGV2aWNlQWN0aW9uIH0gZnJvbSBcIi5cIjtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXROb3JtYWwgPSAoZGV2aWNlc0lEOiBzdHJpbmcsIHNlbnNvcjogc2Vuc29yVHlwZSkgPT4ge1xyXG4gIHJldHVybiB7XHJcbiAgICB0eXBlOiAnU0VUX05PUk1BTCcsXHJcbiAgICBpZDogZGV2aWNlc0lELFxyXG4gICAgc2Vuc29yOiBzZW5zb3JcclxuICB9IGFzIGNvbnN0O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RGV2aWNlID0gKGRldmljZXNJRDogc3RyaW5nKSA9PiAoe1xyXG4gIHR5cGU6ICdHRVRfREVWSUNFX0lORk9STUFUSU9OJyxcclxuICBpZDogZGV2aWNlc0lELFxyXG59IGFzIGNvbnN0KVxyXG5cclxuZXhwb3J0IGNvbnN0IGNoYW5nZURldmljZVNlbnNvciA9IChkZXZpY2VzSUQ6IHN0cmluZywgc2Vuc29yOiBzZW5zb3JUeXBlLCBwYXJhbToge30pID0+ICh7XHJcbiAgdHlwZTogJ0NIQU5HRV9ERVZJQ0VfU0VOU09SJyxcclxuICBpZDogZGV2aWNlc0lELFxyXG4gIHNlbnNvcixcclxuICBwYXJhbSxcclxufSBhcyBjb25zdClcclxuXHJcbmV4cG9ydCBjb25zdCBzYXZlRGV2aWNlID0gKGRldmljZXNJRDogc3RyaW5nLCBwYXJhbTogRGV2aWNlc0ludGVyZmFjZSkgPT4gKHtcclxuICB0eXBlOiAnU0FWRV9ERVZJQ0VfSU5GT1JNQVRJT04nLFxyXG4gIGRldmljZXNJRCxcclxuICBkZXZpY2U6IHBhcmFtXHJcbn0gYXMgY29uc3QpXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RGV2aWNlSW5pdCA9IChkZXZpY2VzTGlzdDogRGV2aWNlc0ludGVyZmFjZVtdKSA9PiAoe1xyXG4gIHR5cGU6ICdJTklUX0RFVklDRVNMSVNUJyxcclxuICBkZXZpY2VzTGlzdCxcclxufSBhcyBjb25zdCk7XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlRGV2aWNlRnJvbUNhcmQgPSAoZGV2aWNlSUQ6IHN0cmluZykgPT4gKHtcclxuICB0eXBlOiAnREVMRVRfREVWSUNFX0ZST01fQ0FSRCcsXHJcbiAgaWQ6IGRldmljZUlELFxyXG59IGFzIGNvbnN0KTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0RGV2aWNlbGlzdCA9ICgpOiBUaHVua0FjdGlvbjxQcm9taXNlPHZvaWQ+LCBBcHBTdGF0ZUludGVyZmFjZSwgbnVsbCwgQWN0aW9uPHN0cmluZz4+ID0+IHtcclxuICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICBsZXQgZGV2aWNlc0xpc3QgPSBhd2FpdCBodHRwRGV2aWNlLmdldERldmljZUZyb21MaXN0KCk7XHJcbiAgICBkaXNwYXRjaChnZXREZXZpY2VJbml0KGRldmljZXNMaXN0KSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlRGV2aWNlID0gKGRldmljZUlEOiBzdHJpbmcpOiBUaHVua0FjdGlvbjxQcm9taXNlPGJvb2xlYW4+LCBBcHBTdGF0ZUludGVyZmFjZSwgbnVsbCwgQWN0aW9uPHN0cmluZz4+ID0+IHtcclxuICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XHJcbiAgICBsZXQgcmVzID0gYXdhaXQgaHR0cFVzZXIuZGVsZXRlRGV2aWNlKGRldmljZUlEKTtcclxuICAgIGlmIChyZXMgPT09IHRydWUpIHtcclxuICAgICAgZGlzcGF0Y2godXNlckFjdGlvbi5kZWxldGVEZXZpY2UoZGV2aWNlSUQpKTtcclxuICAgICAgZGlzcGF0Y2goZGVsZXRlRGV2aWNlRnJvbUNhcmQoZGV2aWNlSUQpKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2F2ZURldmljZUluZm9ybWF0aW9uID0gKHBhcmFtOiBEZXZpY2VzSW50ZXJmYWNlKTogVGh1bmtBY3Rpb248UHJvbWlzZTxib29sZWFuPiwgQXBwU3RhdGVJbnRlcmZhY2UsIG51bGwsIEFjdGlvbjxzdHJpbmc+PiA9PiB7XHJcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xyXG4gICAgbGV0IHJlcyA9IGF3YWl0IGh0dHBEZXZpY2Uuc2F2ZURldmljZShwYXJhbSk7XHJcbiAgICBpZiAocmVzID09PSB0cnVlKSB7XHJcbiAgICAgIGRpc3BhdGNoKHNhdmVEZXZpY2UocGFyYW0uZGV2aWNlSUQsIHBhcmFtKSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldFNlbnNvck5vcm1hbCA9IChkZXZpY2VzSUQ6IHN0cmluZywgc2Vuc29yOiBzZW5zb3JUeXBlKTogVGh1bmtBY3Rpb248UHJvbWlzZTxib29sZWFuPiwgQXBwU3RhdGVJbnRlcmZhY2UsIG51bGwsIEFjdGlvbjxzdHJpbmc+PiA9PiB7XHJcbiAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xyXG4gICAgbGV0IHJlcyA9IGF3YWl0IGh0dHBEZXZpY2Uuc2V0U2Vuc29yTm9ybWFsKGRldmljZXNJRCwgc2Vuc29yKTtcclxuICAgIGlmIChyZXMgPT09IHRydWUpIHtcclxuICAgICAgZGlzcGF0Y2goc2V0Tm9ybWFsKGRldmljZXNJRCwgc2Vuc29yKSk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufSIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xyXG5cclxudHlwZSBwb3NpdGlvblR5cGUgPSAnYWJzb2x1dGUnIHwgJ3JlbGF0aXZlJztcclxuXHJcbmludGVyZmFjZSBOYXZCYXJQcm9wcyBleHRlbmRzIFJlYWN0LkhUTUxQcm9wczxIVE1MRGl2RWxlbWVudD4ge1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBpY29uPzogUmVhY3QuUmVhY3ROb2RlO1xyXG4gIGxlZnRDb250ZW50PzogUmVhY3QuUmVhY3ROb2RlO1xyXG4gIHJpZ2h0Q29udGVudD86IFJlYWN0LlJlYWN0Tm9kZTtcclxuICBvbkxlZnRDbGljaz86IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxEaXZFbGVtZW50PjtcclxuICBvbnJpZ2h0Q2xpY2s/OiBSZWFjdC5Nb3VzZUV2ZW50SGFuZGxlcjxIVE1MQnV0dG9uRWxlbWVudD47XHJcbiAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgcG9zaXRpb24/OiBwb3NpdGlvblR5cGU7XHJcbn1cclxuXHJcbmNvbnN0IGxlZnRJY29uID0gPHN2ZyB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiBwLWlkPVwiMTczMVwiIGhlaWdodD1cIjEwMCVcIj48cGF0aCBkPVwiTTU4OS4wODggNzkwLjYyNEwzMTAuNDY0IDUxMmwyNzguNjI0LTI3OC42MjQgNDUuMjQ4IDQ1LjI0OEw0MDAuOTYgNTEybDIzMy4zNzYgMjMzLjM3NnpcIiBmaWxsPVwiIzE4MTgxOFwiIHAtaWQ9XCIxNzMyXCIgLz48L3N2Zz5cclxuXHJcbmZ1bmN0aW9uIE5hdmJhcihwcm9wczogTmF2QmFyUHJvcHMpOiBKU1guRWxlbWVudCB7XHJcbiAgY29uc3QgcHJlZml4ID0gJ25hdmJhcic7XHJcblxyXG4gIGNvbnN0IHtcclxuICAgIGljb24gPSBsZWZ0SWNvbixcclxuICAgIGxlZnRDb250ZW50LFxyXG4gICAgcmlnaHRDb250ZW50LFxyXG4gICAgb25MZWZ0Q2xpY2ssXHJcbiAgICBvbnJpZ2h0Q2xpY2ssXHJcbiAgICB0aXRsZSA9ICd0aXRsZScsXHJcbiAgICBwb3NpdGlvbiA9ICdhYnNvbHV0ZSdcclxuICB9ID0gcHJvcHM7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8PlxyXG4gICAgICB7cG9zaXRpb24gPT09ICdhYnNvbHV0ZScgPyA8ZGl2IGNsYXNzTmFtZT1cIm5hdmJhci1ib3R0b21cIiAvPiA6IG51bGx9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSduYXZiYXInPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWxlZnRgfT5cclxuICAgICAgICAgIHtvbkxlZnRDbGljayA/IDxkaXYgb25DbGljaz17b25MZWZ0Q2xpY2t9IHN0eWxlPXt7IGhlaWdodDogXCIxMDAlXCIgfX0+e2ljb259PC9kaXY+IDogbnVsbH1cclxuICAgICAgICAgIHtsZWZ0Q29udGVudH1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS10aXRsZWB9Pnt0aXRsZX08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4fS1yaWdodGB9PlxyXG4gICAgICAgICAge29ucmlnaHRDbGljayA/XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXtgJHtwcmVmaXh9LWJ1dHRvbmB9IG9uQ2xpY2s9e29ucmlnaHRDbGlja30+e3JpZ2h0Q29udGVudH08L2J1dHRvbj5cclxuICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTmF2YmFyOyIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbGVzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5sZXNzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbGVzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5sZXNzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2xlc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXgubGVzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpKGZhbHNlKTtcbi8vIE1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm5hdmJhciB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGJhY2tncm91bmQ6ICNiZWEwZGE7XFxuICBoZWlnaHQ6IDRyZW07XFxuICB3aWR0aDogMTAwJTtcXG59XFxuLm5hdmJhci1ib3R0b20ge1xcbiAgZmxleC1zaHJpbms6IDA7XFxuICBoZWlnaHQ6IDRyZW07XFxuICB3aWR0aDogMTAwJTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG59XFxuLm5hdmJhci1ib3R0b20gKyAubmF2YmFyIHtcXG4gIHBvc2l0aW9uOiBmaXhlZDtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxufVxcbi5uYXZiYXItbGVmdCxcXG4ubmF2YmFyLXRpdGxlLFxcbi5uYXZiYXItcmlnaHQge1xcbiAgZmxleDogMTtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG59XFxuLm5hdmJhci1sZWZ0IHtcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcXG59XFxuLm5hdmJhci10aXRsZSB7XFxuICBmb250LXNpemU6IDEuNXJlbTtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbn1cXG4ubmF2YmFyLXJpZ2h0IHtcXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XFxufVxcbi5uYXZiYXItYnV0dG9uIHtcXG4gIGhlaWdodDogNjAlO1xcbiAgd2lkdGg6IDVyZW07XFxuICBtYXJnaW4tcmlnaHQ6IDFyZW07XFxuICBib3JkZXI6IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgb3V0bGluZTogMDtcXG59XFxuXCIsIFwiXCJdKTtcblxuIiwiaW1wb3J0IE1RVFQgZnJvbSBcInBhaG8tbXF0dFwiO1xyXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuLi8uLi9BUFBcIjtcclxuaW1wb3J0IHsgZGV2aWNlQWN0aW9uIH0gZnJvbSBcIi4uLy4uL3JlZHV4L2FjdGlvblwiO1xyXG5pbXBvcnQgeyBzZW5zb3JUeXBlIH0gZnJvbSBcIi4uLy4uL3JlZHV4L2ludGVyZmFjZS9kZXZpY2VzLmludGVyZmFjZVwiO1xyXG5cclxuLy8gQ3JlYXRlIGEgY2xpZW50IGluc3RhbmNlXHJcbmV4cG9ydCBsZXQgY2xpZW50OiBNUVRULkNsaWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuZnVuY3Rpb24gc3ViKGNsaWVudDogTVFUVC5DbGllbnQsIGRldmljZXNMaXN0OiBzdHJpbmdbXSkge1xyXG4gIGRldmljZXNMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgIGNsaWVudC5zdWJzY3JpYmUoYGRldmljZXMvJHtpdGVtfS8jYCk7XHJcbiAgfSlcclxufVxyXG5cclxuLy8gY2FsbGVkIHdoZW4gdGhlIGNsaWVudCBjb25uZWN0c1xyXG5mdW5jdGlvbiBvbkNvbm5lY3QoY2xpZW50OiBNUVRULkNsaWVudCwgZGV2aWNlc0xpc3Q6IHN0cmluZ1tdKSB7XHJcbiAgLy8gT25jZSBhIGNvbm5lY3Rpb24gaGFzIGJlZW4gbWFkZSwgbWFrZSBhIHN1YnNjcmlwdGlvbiBhbmQgc2VuZCBhIG1lc3NhZ2UuXHJcbiAgY29uc29sZS5sb2coXCJvbm1xdHRDb25uZWN0XCIpO1xyXG4gIGNsaWVudC5zdWJzY3JpYmUoXCJXb3JsZFwiKTtcclxuICBzdWIoY2xpZW50LCBkZXZpY2VzTGlzdCk7XHJcbiAgbGV0IG1lc3NhZ2U7XHJcbiAgbWVzc2FnZSA9IG5ldyBNUVRULk1lc3NhZ2UoXCJIZWxsb1wiKTtcclxuICBtZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSA9IFwiV29ybGRcIjtcclxuICBjbGllbnQuc2VuZChtZXNzYWdlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25GYWlsdXJlKCkge1xyXG4gIC8vIE9uY2UgYSBjb25uZWN0aW9uIGhhcyBiZWVuIG1hZGUsIG1ha2UgYSBzdWJzY3JpcHRpb24gYW5kIHNlbmQgYSBtZXNzYWdlLlxyXG4gIGNvbnNvbGUubG9nKFwib25GYWlsdXJlXCIpO1xyXG4gIC8vIEFsZXJ0LmFsZXJ0KCfov57mjqXmnI3liqHlmajlpLHotKUnKTtcclxufVxyXG5cclxuLy8gY2FsbGVkIHdoZW4gdGhlIGNsaWVudCBsb3NlcyBpdHMgY29ubmVjdGlvblxyXG5mdW5jdGlvbiBvbkNvbm5lY3Rpb25Mb3N0KHJlc3BvbnNlT2JqZWN0OiBNUVRULk1RVFRFcnJvcikge1xyXG4gIGlmIChyZXNwb25zZU9iamVjdC5lcnJvckNvZGUgIT09IDApIHtcclxuICAgIGNvbnNvbGUubG9nKFwib25Db25uZWN0aW9uTG9zdDpcIiArIHJlc3BvbnNlT2JqZWN0LmVycm9yTWVzc2FnZSk7XHJcbiAgfVxyXG4gIGlmKGNsaWVudCE9PW51bGwpe1xyXG4gICAgY2xpZW50LmNvbm5lY3QoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNhbGxlZCB3aGVuIGEgbWVzc2FnZSBhcnJpdmVzXHJcbmZ1bmN0aW9uIG9uTWVzc2FnZUFycml2ZWQobWVzc2FnZTogTVFUVC5NZXNzYWdlKSB7XHJcbiAgY29uc29sZS5sb2coXCJvbk1lc3NhZ2VBcnJpdmVkOlwiICsgbWVzc2FnZS5wYXlsb2FkU3RyaW5nKTtcclxuICBjb25zdCB0b3BpYyA9IG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lLnNwbGl0KCcvJyk7XHJcbiAgbGV0IGRldmljZUlEO1xyXG4gIGxldCBzZW5zb3I6IHNlbnNvclR5cGU7XHJcbiAgc3dpdGNoICh0b3BpYy5sZW5ndGgpIHtcclxuICAgIGNhc2UgMzpcclxuICAgICAgZGV2aWNlSUQgPSB0b3BpY1sxXTtcclxuICAgICAgc2Vuc29yID0gdG9waWNbMl0ucmVwbGFjZSgvXy9nLCAnICcpIGFzIHNlbnNvclR5cGU7XHJcbiAgICAgIHN0b3JlLmRpc3BhdGNoKGRldmljZUFjdGlvbi5jaGFuZ2VEZXZpY2VTZW5zb3IoZGV2aWNlSUQsIHNlbnNvciwgSlNPTi5wYXJzZShtZXNzYWdlLnBheWxvYWRTdHJpbmcpKSlcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBicmVhaztcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZU1RVFRDbGllbnQgPSBhc3luYyAoZGV2aWNlc0xpc3Q6IHN0cmluZ1tdLCB1c2VySUQ6IHN0cmluZykgPT4ge1xyXG4gIGNsaWVudCA9IG5ldyBNUVRULkNsaWVudChcImZvZ21vbnRoLnh5elwiLCA0NDMsICcvbXF0dHdzcycsIHVzZXJJRCk7XHJcblxyXG4gIGNvbnN0IG9wdGlvbiA9IHtcclxuICAgIHRpbWVvdXQ6IDEwLFxyXG4gICAgb25TdWNjZXNzOiBvbkNvbm5lY3QuYmluZChudWxsLCBjbGllbnQsIGRldmljZXNMaXN0KSxcclxuICAgIG9uRmFpbHVyZTogb25GYWlsdXJlLFxyXG4gICAgcmVjb25uZWN0OiB0cnVlLFxyXG4gICAgdXNlU1NMOiB0cnVlLFxyXG4gIH1cclxuXHJcbiAgaWYgKGNsaWVudC5pc0Nvbm5lY3RlZCgpKSB7XHJcbiAgICByZXR1cm4gY2xpZW50O1xyXG4gIH1cclxuXHJcbiAgLy8gc2V0IGNhbGxiYWNrIGhhbmRsZXJzXHJcbiAgY2xpZW50Lm9uQ29ubmVjdGlvbkxvc3QgPSBvbkNvbm5lY3Rpb25Mb3N0O1xyXG4gIGNsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gb25NZXNzYWdlQXJyaXZlZDtcclxuXHJcbiAgLy8gY29ubmVjdCB0aGUgY2xpZW50XHJcbiAgY2xpZW50LmNvbm5lY3Qob3B0aW9uKTtcclxuXHJcbiAgcmV0dXJuIGNsaWVudDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHN0YXJ0TVFUVCA9ICgpID0+IHtcclxuICBpZiAoY2xpZW50ID09PSBudWxsKSB7XHJcbiAgICBjb25zdCBkZXZpY2VzTGlzdCA9IHN0b3JlLmdldFN0YXRlKCkudXNlci5kZXZpY2VzO1xyXG4gICAgY29uc3QgdXNlciA9IHN0b3JlLmdldFN0YXRlKCkudXNlci5pZDtcclxuICAgIGNyZWF0ZU1RVFRDbGllbnQoZGV2aWNlc0xpc3QsIHVzZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIk1xdHQgaXMgZXhpc3RzXCIpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGlzY29ubmVjdE1RVFQgPSAoKSA9PiB7XHJcbiAgaWYgKGNsaWVudCAhPT0gbnVsbCkge1xyXG4gICAgY2xpZW50LmRpc2Nvbm5lY3QoKTtcclxuICAgIGNsaWVudCA9IG51bGw7XHJcbiAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==